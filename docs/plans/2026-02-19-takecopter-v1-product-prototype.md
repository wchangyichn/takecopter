# takecopter V1 产品原型文档（功能 + 交互）

## 1. 文档信息
- 文档版本：v1.0
- 文档日期：2026-02-19
- 产品名称：takecopter
- 适用范围：V1（单项目文件夹迁移，不做多端并发同步）
- 目标平台：Desktop 优先，Mobile/Web 做减法适配

## 2. 产品目标

takecopter 是一个面向故事创作者的本地优先创作工作台，目标是把“设定管理 + 结构化创作 + 素材管理”整合在一个项目中。

V1 重点目标：
1. 稳定完成故事工程创建、编辑、保存与迁移（单项目）
2. 可视化管理设定关系（卡片 + 连线 + 详情）
3. 完成 EP/Scene/Shot/Take 层级创作流程并关联素材
4. 保证素材默认复制进项目目录，减少迁移损坏

## 3. 信息架构（IA）

```
takecopter
├─ 首页 Home
│  ├─ 新建故事
│  ├─ 故事列表
│  └─ 最近编辑
└─ 故事页 Story Workspace
   ├─ 设定 Setting
   │  ├─ 设定画布（节点关系）
   │  ├─ 卡片预览
   │  └─ 卡片详情（富文本/素材/关联）
   └─ 创作 Create
      ├─ 大纲编辑
      ├─ 结构树（EP > Scene > Shot > Take）
      ├─ 内容编辑区（按层级切换）
      └─ 设定引用面板
```

## 4. 页面原型说明

## 4.1 首页 Home

### 布局
- 顶部：品牌区、全局搜索、创建按钮
- 主区左侧：故事列表（卡片流）
- 主区右侧：最近编辑、草稿状态、迁移入口

### 核心功能
- 创建故事：输入标题、简介、模板（可选）
- 浏览故事：按更新时间排序，支持搜索与筛选
- 快速入口：直接进入“设定页”或“创作页”

### 关键交互
- 悬停故事卡片：显示快捷操作（打开、重命名、迁移）
- 新建完成后：自动进入该故事的“设定页”
- 删除故事：二次确认，并提示是否保留素材

## 4.2 设定页 Setting（画布）

### 布局
- 左侧：设定卡片列表（可按类型筛选）
- 中央：无限画布（节点 + 连线）
- 右侧：详情面板（选中卡片后显示）

### 核心功能
- 新建设定卡片（角色/地点/道具/事件等）
- 卡片拖拽与定位保存
- 卡片间建立关系连线（relation type）
- 进入卡片详情进行深度编辑
- 上传卡片相关图片（默认复制进项目）
- 关联到其他设定卡片

### 详情页字段
- 基础：标题、类型、摘要、标签
- 内容：正文（富文本或结构化段落）
- 素材：图片列表、封面选择
- 关系：入边/出边、关系类型、快速跳转
- 引用：被哪些 EP/Scene/Shot/Take 使用

### 关键交互
- 双击卡片：展开详情面板
- 连线交互：拖拽连接点创建关系；点击线段编辑关系类型
- 删除卡片：先展示影响（被引用次数、关系数量）再确认
- 自动保存：详情修改后 600ms 防抖提交

## 4.3 创作页 Create

### 布局
- 左侧：层级树（EP > Scene > Shot > Take）
- 中央：当前选中节点编辑器
- 右侧：设定引用面板 + 素材面板
- 顶部：故事大纲入口、全局保存状态

### 核心功能
- 大纲编辑（章节目标、节奏、关键冲突）
- EP：编辑标题与简介
- Scene：编辑场景介绍、上传场景图
- Shot：编辑分镜脚本与镜头设计、上传分镜图、选择采用 Take
- Take：上传视频、记录说明与版本信息
- 任意层级引用设定卡片

### 关键交互
- 新增节点：在当前层级上下文创建并自动排序
- 拖拽排序：支持同层级重排（写入 order_no）
- Shot 选中 Take：一键设为 selected_take
- 引用设定：输入 @ 搜索卡片，回车创建引用

## 5. 用户流程原型（重点场景）

## 5.1 新建故事并开始设定
1. 首页点击“新建故事”
2. 填写标题和简介
3. 创建成功后自动进入设定页
4. 创建第一批设定卡片并建立关系

成功标准：5 分钟内完成至少 3 张卡片 + 2 条关系。

## 5.2 从设定推进到创作
1. 在设定页完成主要角色/地点卡片
2. 切换到创作页创建 EP 和 Scene
3. 在 Scene/Shot 中引用设定卡片
4. 完成 Shot 与 Take 绑定

成功标准：引用链可反查，且跳转可用。

## 5.3 项目迁移后恢复
1. 将 `*.takecopter` 文件夹迁移到另一端
2. 打开项目，执行版本检查与快速素材校验
3. 若缺失素材，进入重链接向导
4. 修复后继续编辑

成功标准：迁移后关系图、层级树、文本内容保持完整。

## 6. 交互与状态规范

## 6.1 全局状态
- `Saved`：所有本地写入完成
- `Saving`：有变更待写入
- `Error`：写入失败，显示重试

显示规则：导航栏右上角始终可见，不允许仅 toast 提示。

## 6.2 空状态
- 首页无故事：展示“创建第一个故事”引导
- 设定页无卡片：展示“创建设定卡片”与示例模板
- 创作页无层级：引导先创建 EP

## 6.3 错误状态
- 素材导入失败：明确失败原因（路径权限/空间不足/文件损坏）
- 项目被占用：提示已有实例打开（Project Lock）
- 素材缺失：统一进入重链接流程

## 7. 动效与视觉规范（V1）

## 7.1 动效基线
- 页面切换：200~260ms，ease-out
- 卡片入场：stagger 40ms
- 抽屉/面板：spring（中等阻尼）
- 连线高亮：hover 触发 120ms 淡入

## 7.2 视觉风格
- 风格关键词：多彩、清晰、专业创作工具
- 色彩策略：功能色分层（信息/警告/成功/引用）
- 信息密度：高密度但可扫描，避免过度装饰
- 字体策略：中英文可读性优先，标题与正文分级明显

## 8. 响应式策略（减法设计）

Desktop：完整能力（画布 + 多栏编辑 + 高效率快捷键）

Mobile（V1 减法）：
- 保留：浏览、轻编辑、素材查看、引用查看
- 缩减：复杂画布操作、批量管理、高级排序
- 交互替代：侧边栏改底部抽屉，详情改全屏页

## 9. 可用性与防错设计

- 危险操作必须二次确认（删除卡片/删除节点/删除素材引用）
- 自动保存 + 手动保存并存（手动保存用于心理确认）
- 重要字段离开页面前强制 flush
- 所有异步操作必须给出进度与可取消入口
- 不允许“成功 UI”早于“落盘成功”

## 10. V1 验收清单（产品视角）

- 可创建并打开单个项目
- 首页可管理故事列表并快速进入工作区
- 设定页可完成卡片、连线、详情编辑与素材关联
- 创作页可完成 EP/Scene/Shot/Take 全链路编辑
- Shot 可选择采用 Take，并可追溯到视频素材
- 各层级可引用设定卡片并反查
- 项目迁移后可打开，缺失素材可重链接
- 移动端可完成浏览与轻编辑（减法版本）

## 11. V1 之外（明确不做）

- 多端实时同步与冲突自动合并
- 多人协作编辑
- 云端版本分支与合并
- AI 自动生成剧情与分镜

---

该文档为 V1 产品与交互原型基线。后续进入实现前，可在此基础上拆解为：
1) PRD 任务清单
2) 交互稿（高保真）
3) 开发任务（数据层/页面层/状态机）
