# takecopter

本地优先的故事创作工作台，聚焦「设定管理 + AI 辅助创作 + 结构化创作 + 项目迁移」。

## 功能总览
- 首页：创建故事、故事列表、导入导出、模型密钥设置（按模型保存 API Key）。
- 故事页-设定：卡片画布、关系连接、预览弹窗、多窗口管理、设定编辑页。
- 故事页-创作：结构树（EP > Scene > Shot > Take）与节点编辑持久化。
- 模版系统：卡片可保存为全局/故事模版，新建卡片可直接套用标签与属性。
- 数据迁移：项目导入/导出 JSON（带 `schemaVersion`），支持旧数据迁移。

## 关键交互
- 信息架构：`首页 -> 故事页（设定 / 创作）`。
- 设定卡片：拖拽定位持久化；点击打开高保真预览；可同时打开多个预览窗口。
- 设定编辑：固定属性（名称/摘要/分类/标签）+ 可拖拽排序属性。
- AI 工作台：引导、生成、审校、润色、外部辅助统一聚合；所有落卡修改均需确认。
- 就近润色：摘要与单条属性可在旁边直接触发润色。

## AI 辅助能力（设定编辑页）
- 分步设定引导：根据卡片分类/标签/已有属性动态生成问题并引导补全。
- 摘要生成属性：优先补全已有属性，缺失维度再新增。
- 审校并建议更新：读取摘要+属性输出 patch，支持按字段勾选应用。
- 属性生成摘要：仅基于属性重建摘要。
- 润色：支持整卡/摘要/单条属性，弹窗输入方案（多行），并可复用最近方案。
- 外部 AI 辅助：按模式生成提示词，支持 `summary` / `field` / `suggestions` / `patch` 导入。

## 工程架构
- 工程架构说明：`docs/ARCHITECTURE.md`
- 客户端主目录：`apps/desktop`
- 关键层次：
  - `src/views` 页面与交互编排
  - `src/hooks` 状态与用例
  - `src/data` 仓储抽象与存储适配
  - `src-tauri` 桌面原生能力与 SQLite

## 构建与验证
```bash
cd apps/desktop
npm install
npm run dev
npm run lint
npm run build
cargo check --manifest-path src-tauri/Cargo.toml
```

## 文档
- 架构文档：`docs/ARCHITECTURE.md`
- 变更记录：`CHANGELOG.md`
- 计划文档：`docs/plans/`
