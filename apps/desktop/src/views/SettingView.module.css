.container {
  display: flex;
  height: calc(100vh - 56px - var(--space-6) * 2);
  margin: calc(var(--space-6) * -1);
  animation: fadeIn 300ms ease-out;
}

.listPanel {
  display: flex;
  flex-direction: column;
  padding: var(--space-4);
  background: var(--bg-elevated);
}

.panelHeader {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--space-4);
}

.panelActions {
  display: flex;
  align-items: center;
  gap: var(--space-2);
}

.inlineActionButton {
  min-width: 0;
  max-width: 100%;
  white-space: nowrap;
  flex-shrink: 0;
  border-radius: 999px;
  box-shadow: 0 1px 0 rgba(255, 255, 255, 0.55) inset, 0 8px 18px rgba(15, 23, 42, 0.12);
  transition: transform 160ms ease, box-shadow 160ms ease;
}

.inlineActionButton:hover {
  transform: translateY(-1px);
  box-shadow: 0 1px 0 rgba(255, 255, 255, 0.65) inset, 0 12px 24px rgba(15, 23, 42, 0.18);
}

.toolbox {
  margin-bottom: var(--space-4);
  padding: var(--space-3);
  border: 1px solid var(--border-light);
  border-radius: var(--radius-lg);
  background: var(--slate-50);
}

.toolboxHeader {
  font-size: var(--text-xs);
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  color: var(--slate-500);
  margin-bottom: var(--space-2);
}

.toolboxRow {
  display: flex;
  align-items: center;
  gap: var(--space-2);
  flex-wrap: wrap;
}

.toolboxActionButton {
  flex: 1 1 0;
  min-width: 104px;
  max-width: 100%;
  white-space: nowrap;
}

.toolboxActionButton span,
.inlineActionButton span {
  white-space: nowrap;
}

.tagInput {
  flex: 1;
  border: 1px solid var(--border-default);
  border-radius: var(--radius-md);
  background: var(--bg-elevated);
  color: var(--slate-700);
  font-size: var(--text-sm);
  padding: var(--space-2) var(--space-3);
}

.tagInput:focus-visible {
  outline: 2px solid var(--border-focus);
  outline-offset: 1px;
}

.colorInput {
  width: 34px;
  height: 34px;
  border: none;
  border-radius: var(--radius-md);
  background: transparent;
  cursor: pointer;
}

.tagFilters {
  margin-top: var(--space-3);
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-2);
}

.folderTree {
  display: flex;
  flex-direction: column;
  gap: var(--space-2);
  overflow-y: auto;
  flex: 1;
}

.folderBlock {
  border: 1px solid var(--border-light);
  border-radius: var(--radius-lg);
  overflow: hidden;
  background: var(--bg-elevated);
}

.folderHeader {
  width: 100%;
  border: none;
  background: transparent;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: var(--space-2) var(--space-3);
  cursor: pointer;
  color: var(--slate-700);
  font-size: var(--text-sm);
}

.folderHeader:hover {
  background: var(--slate-50);
}

.folderHeaderActive {
  background: var(--coral-50);
}

.folderHeaderLeft {
  display: inline-flex;
  align-items: center;
  gap: var(--space-2);
  min-width: 0;
}

.folderIcon {
  font-size: 14px;
}

.folderCount {
  font-size: var(--text-xs);
  color: var(--slate-500);
}

.folderCardList {
  list-style: none;
  margin: 0;
  padding: 0 var(--space-2) var(--space-2);
  display: flex;
  flex-direction: column;
  gap: var(--space-1);
}

.tagFilter {
  border: 1px solid var(--border-light);
  border-radius: var(--radius-full);
  background: transparent;
  color: var(--slate-600);
  font-size: var(--text-xs);
  padding: var(--space-1) var(--space-2);
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  gap: var(--space-1);
}

.tagFilter:hover {
  border-color: var(--coral-300);
  color: var(--coral-600);
}

.activeTagFilter {
  background: var(--coral-100);
  border-color: var(--coral-300);
  color: var(--coral-700);
}

.tagDot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  flex-shrink: 0;
}

.panelHeader h3 {
  font-family: var(--font-body);
  font-size: var(--text-sm);
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  color: var(--slate-500);
  margin: 0;
}

.addButton {
  width: 28px;
  height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--coral-100);
  border: none;
  border-radius: var(--radius-md);
  color: var(--coral-600);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.addButton:hover {
  background: var(--coral-200);
}

.addButton svg {
  width: 16px;
  height: 16px;
}

.filterTabs {
  display: flex;
  gap: var(--space-1);
  margin-bottom: var(--space-4);
  flex-wrap: wrap;
}

.filterTab {
  padding: var(--space-1) var(--space-3);
  background: transparent;
  border: 1px solid var(--border-light);
  border-radius: var(--radius-full);
  font-size: var(--text-xs);
  color: var(--slate-500);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.filterTab:hover {
  border-color: var(--coral-300);
  color: var(--coral-600);
}

.filterTab.active {
  background: var(--coral-100);
  border-color: var(--coral-300);
  color: var(--coral-700);
}

.cardList {
  list-style: none;
  padding: 0;
  margin: 0;
  display: flex;
  flex-direction: column;
  gap: var(--space-1);
  overflow-y: auto;
  flex: 1;
}

.listItem {
  display: flex;
  align-items: center;
  gap: var(--space-3);
  padding: var(--space-3);
  border-radius: var(--radius-lg);
  cursor: pointer;
  transition: all var(--transition-fast);
  animation: slideIn 300ms ease-out both;
}

@keyframes slideIn {
  from { opacity: 0; transform: translateX(-10px); }
  to { opacity: 1; transform: translateX(0); }
}

.listItem:hover {
  background: var(--slate-50);
}

.listItem.selected {
  background: var(--coral-50);
}

.listItemDot {
  width: 10px;
  height: 10px;
  border-radius: 50%;
  flex-shrink: 0;
}

.listItemContent {
  min-width: 0;
  flex: 1;
}

.listItemTitle {
  display: block;
  font-size: var(--text-sm);
  font-weight: 500;
  color: var(--slate-700);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.listItemType {
  display: block;
  font-size: var(--text-xs);
  color: var(--slate-400);
}

.canvasArea {
  flex: 1;
  position: relative;
  overflow: hidden;
  background: 
    linear-gradient(90deg, var(--slate-200) 1px, transparent 1px),
    linear-gradient(var(--slate-200) 1px, transparent 1px),
    var(--slate-50);
  background-size: 40px 40px;
}

.canvas {
  position: absolute;
  inset: 0;
}

.connections {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
}

.connectionLine {
  transition: stroke var(--transition-fast);
}

.canvasCard {
  position: absolute;
  cursor: grab;
  animation: cardPop 400ms cubic-bezier(0.34, 1.56, 0.64, 1) both;
}

@keyframes cardPop {
  from { opacity: 0; transform: scale(0.8); }
  to { opacity: 1; transform: scale(1); }
}

.canvasCard:active,
.canvasCard.dragging {
  cursor: grabbing;
}

.canvasCardInner {
  width: 120px;
  background: var(--bg-elevated);
  border-radius: var(--radius-lg);
  border: 2px solid var(--slate-200);
  overflow: hidden;
  box-shadow: var(--shadow-md);
  transition: all var(--transition-fast);
}

.canvasCard:hover .canvasCardInner,
.canvasCard.selected .canvasCardInner {
  box-shadow: var(--shadow-xl);
  transform: translateY(-2px);
}

.canvasCardHeader {
  padding: var(--space-2);
}

.canvasCardType {
  font-size: var(--text-xs);
  font-weight: 600;
  color: white;
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.canvasCardBody {
  padding: var(--space-3);
}

.canvasCardTitle {
  font-size: var(--text-sm);
  font-weight: 600;
  color: var(--slate-700);
  display: block;
  text-align: center;
}

.canvasControls {
  position: absolute;
  bottom: var(--space-4);
  right: var(--space-4);
  display: flex;
  flex-direction: column;
  gap: var(--space-2);
  background: var(--bg-elevated);
  padding: var(--space-2);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-lg);
}

.canvasHint {
  position: absolute;
  left: var(--space-4);
  bottom: var(--space-4);
  background: rgba(255, 255, 255, 0.82);
  border: 1px solid var(--border-light);
  border-radius: var(--radius-full);
  padding: var(--space-1) var(--space-3);
  font-size: var(--text-xs);
  color: var(--slate-600);
}

.canvasControl {
  width: 36px;
  height: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: transparent;
  border: none;
  border-radius: var(--radius-md);
  color: var(--slate-500);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.canvasControl:hover {
  background: var(--slate-100);
  color: var(--slate-700);
}

.canvasControl svg {
  width: 20px;
  height: 20px;
}

.detailPanel {
  padding: calc(var(--space-6) + 8px) var(--space-6) calc(var(--space-8) + env(safe-area-inset-bottom));
  position: relative;
  animation: slideInRight 250ms ease-out;
  overflow-y: auto;
  min-height: 0;
  scroll-padding-top: calc(var(--space-6) + 8px);
  scroll-padding-bottom: calc(var(--space-8) + env(safe-area-inset-bottom));
  overscroll-behavior: contain;
}

.summaryPanel {
  padding: var(--space-4);
  border-right: 1px solid var(--border-light);
  display: flex;
  flex-direction: column;
  gap: var(--space-4);
}

.summaryHeader h3 {
  margin: 0;
  font-family: var(--font-body);
  font-size: var(--text-sm);
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  color: var(--slate-500);
}

.summarySection h4 {
  margin: 0 0 var(--space-2);
  font-size: var(--text-xs);
  color: var(--slate-500);
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.summaryHint {
  margin: 0;
  font-size: var(--text-xs);
  color: var(--slate-500);
}

.summaryList {
  list-style: none;
  padding: 0;
  margin: 0;
  display: flex;
  flex-direction: column;
  gap: var(--space-2);
}

.summaryChecklist {
  list-style: none;
  margin: var(--space-2) 0 0;
  padding: 0;
  display: flex;
  flex-direction: column;
  gap: var(--space-1);
}

.summaryChecklistItem {
  display: inline-flex;
  align-items: center;
  gap: var(--space-2);
  font-size: var(--text-xs);
  color: var(--slate-600);
  padding: 2px 0;
}

.summaryChecklistDone {
  color: var(--teal-700);
  font-weight: 600;
}

.summaryItem {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--space-2) var(--space-3);
  border-radius: var(--radius-md);
  background: var(--slate-50);
  font-size: var(--text-sm);
  color: var(--slate-600);
}

.summaryItem strong {
  color: var(--slate-800);
}

.categoryFilters {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-2);
}

.categoryFilter {
  border: 1px solid var(--border-light);
  border-radius: var(--radius-full);
  background: transparent;
  color: var(--slate-600);
  font-size: var(--text-xs);
  padding: var(--space-1) var(--space-3);
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  gap: 6px;
}

.categoryFilter input {
  margin: 0;
}

.categoryFilter:hover {
  border-color: var(--coral-300);
  color: var(--coral-600);
}

.activeCategory {
  background: var(--coral-100);
  border-color: var(--coral-300);
  color: var(--coral-700);
}

.categoryCreator {
  display: flex;
  flex-direction: column;
  gap: var(--space-2);
  margin-top: var(--space-3);
}

.categoryInput,
.categorySelect {
  width: 100%;
  border: 1px solid var(--border-default);
  border-radius: var(--radius-md);
  padding: var(--space-2) var(--space-3);
  font-size: var(--text-sm);
  background: var(--bg-elevated);
  color: var(--slate-700);
  box-shadow: 0 1px 0 rgba(255, 255, 255, 0.6) inset, 0 6px 14px rgba(15, 23, 42, 0.08);
}

.detailQuickCreateRow {
  margin-top: var(--space-2);
  display: flex;
  gap: var(--space-2);
  align-items: center;
}

.detailCategoryRow {
  display: flex;
  gap: var(--space-2);
  align-items: center;
}

.detailInput,
.detailTextarea {
  width: 100%;
  border: 1px solid var(--border-default);
  border-radius: var(--radius-md);
  padding: var(--space-2) var(--space-3);
  font-size: var(--text-sm);
  background: var(--bg-elevated);
  color: var(--slate-700);
  box-shadow: 0 1px 0 rgba(255, 255, 255, 0.62) inset, 0 8px 18px rgba(15, 23, 42, 0.1);
}

.detailTextarea {
  resize: vertical;
  line-height: 1.55;
}

.detailInput:focus-visible,
.detailTextarea:focus-visible {
  outline: 2px solid color-mix(in srgb, var(--border-focus) 82%, var(--teal-300));
  outline-offset: 1px;
  box-shadow: 0 0 0 4px rgba(45, 212, 191, 0.12), 0 12px 24px rgba(15, 23, 42, 0.16);
}

.uploadButton {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: var(--space-2) var(--space-3);
  border-radius: var(--radius-md);
  border: 1px solid var(--border-default);
  cursor: pointer;
  color: var(--slate-700);
  font-size: var(--text-sm);
  background: var(--bg-elevated);
  transition: all var(--transition-fast);
}

.uploadButton:hover {
  border-color: var(--coral-300);
  color: var(--coral-600);
}

.imagePreviewWrap {
  margin-top: var(--space-3);
  display: flex;
  flex-direction: column;
  gap: var(--space-2);
}

.imagePreview {
  width: 100%;
  border-radius: var(--radius-md);
  border: 1px solid var(--border-light);
  object-fit: cover;
  max-height: 220px;
}

.cardTags {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-2);
}

.nameTagRow {
  margin-top: var(--space-2);
  display: flex;
  align-items: center;
  justify-content: flex-start;
  flex-wrap: wrap;
  gap: var(--space-2);
}

.addTagIconButton {
  width: 28px;
  height: 28px;
  border-radius: 999px;
  border: 1px solid var(--border-light);
  background: linear-gradient(180deg, color-mix(in srgb, var(--slate-50) 62%, white), color-mix(in srgb, var(--slate-100) 80%, white));
  color: var(--slate-700);
  font-size: 18px;
  line-height: 1;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  flex-shrink: 0;
  box-shadow: 0 1px 0 rgba(255, 255, 255, 0.6) inset, 0 8px 16px rgba(15, 23, 42, 0.18);
}

.addTagIconButton:hover {
  border-color: var(--coral-300);
  color: var(--coral-700);
  transform: translateY(-1px);
}

.tagChip {
  border: 1px solid var(--border-light);
  background: var(--slate-50);
  border-radius: var(--radius-full);
  padding: var(--space-1) var(--space-2);
  font-size: var(--text-xs);
  color: var(--slate-700);
  display: inline-flex;
  align-items: center;
  gap: var(--space-1);
  cursor: pointer;
}

.tagChip:hover {
  border-color: var(--rose-300);
  color: var(--rose-600);
}

.tagRemove {
  font-weight: 700;
}

.tagPalette {
  margin-top: var(--space-2);
  display: flex;
  flex-direction: column;
  gap: var(--space-2);
}

.tagSearchWrap {
  position: relative;
}

.tagSearchDropdown {
  position: absolute;
  top: calc(100% + 6px);
  left: 0;
  right: 0;
  z-index: var(--z-dropdown);
  background: var(--bg-elevated);
  border: 1px solid var(--border-default);
  border-radius: var(--radius-md);
  box-shadow: var(--shadow-lg);
  overflow: hidden;
  max-height: 220px;
  overflow-y: auto;
}

.tagSearchItem,
.tagCreateItem {
  width: 100%;
  border: none;
  background: transparent;
  padding: var(--space-2) var(--space-3);
  text-align: left;
  font-size: var(--text-sm);
  color: var(--slate-700);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: var(--space-2);
}

.activeSearchItem {
  background: var(--slate-50);
  color: var(--coral-700);
}

.tagSearchItem:hover,
.tagCreateItem:hover {
  background: var(--slate-50);
}

.managerOverlay {
  position: fixed;
  inset: 0;
  z-index: var(--z-modal);
  background: var(--bg-overlay);
  display: grid;
  place-items: center;
  padding: 24px;
}

.confirmOverlay {
  z-index: calc(var(--z-modal) + 30);
}

.topMostOverlay {
  z-index: calc(var(--z-modal) + 40);
}

.previewOverlay {
  position: fixed;
  inset: 0;
  z-index: calc(var(--z-modal) - 1);
  pointer-events: none;
}

.previewOverlay::before {
  content: '';
  position: absolute;
  inset: 0;
  background:
    radial-gradient(circle at 18% 14%, color-mix(in srgb, var(--coral-200) 30%, transparent) 0%, transparent 42%),
    radial-gradient(circle at 82% 72%, color-mix(in srgb, var(--teal-300) 18%, transparent) 0%, transparent 46%),
    color-mix(in srgb, var(--bg-overlay) 74%, transparent);
  backdrop-filter: blur(3px);
}

.previewDialog {
  width: min(760px, 100%);
  max-height: calc(100vh - 48px);
  overflow-y: auto;
  background: var(--bg-elevated);
  border: 1px solid var(--border-light);
  border-radius: var(--radius-xl);
  box-shadow: 0 26px 70px rgba(15, 23, 42, 0.32), 0 0 0 1px color-mix(in srgb, var(--preview-accent, var(--coral-400)) 20%, transparent) inset;
  padding: var(--space-6);
  position: fixed;
  pointer-events: auto;
  animation: slideInRight 240ms ease-out;
}

.previewDialogMinimized {
  width: 360px;
  max-height: none;
  overflow: hidden;
  padding: var(--space-3) var(--space-4);
}

.previewWindowHeader {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--space-3);
  margin-bottom: var(--space-3);
  cursor: grab;
  user-select: none;
}

.previewWindowHeader:active {
  cursor: grabbing;
}

.previewWindowIdentity {
  min-width: 0;
  display: inline-flex;
  align-items: center;
  gap: var(--space-2);
}

.previewWindowDot {
  width: 10px;
  height: 10px;
  border-radius: 50%;
  box-shadow: 0 0 0 3px color-mix(in srgb, var(--preview-accent, var(--coral-400)) 18%, transparent);
}

.previewWindowTitle {
  font-size: var(--text-sm);
  font-weight: 600;
  color: var(--slate-700);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.previewWindowActions {
  display: inline-flex;
  gap: var(--space-2);
}

.previewWindowButton {
  width: 26px;
  height: 26px;
  border-radius: var(--radius-md);
  border: 1px solid var(--border-light);
  background: var(--bg-elevated);
  color: var(--slate-600);
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-size: 13px;
  transition: all var(--transition-fast);
}

.previewWindowButton:hover {
  border-color: var(--coral-300);
  color: var(--coral-600);
  transform: translateY(-1px);
}

.editorOverlay {
  position: fixed;
  inset: 0;
  z-index: var(--z-modal);
  background: var(--bg-overlay);
  display: grid;
  place-items: center;
  padding: 20px;
}

.editorPage {
  width: min(1180px, 100%);
  max-height: calc(100vh - 40px);
  overflow: auto;
  background:
    radial-gradient(circle at 8% 6%, color-mix(in srgb, var(--teal-100) 36%, transparent), transparent 35%),
    radial-gradient(circle at 92% 0%, color-mix(in srgb, var(--coral-100) 40%, transparent), transparent 28%),
    linear-gradient(180deg, color-mix(in srgb, var(--slate-50) 74%, white) 0%, color-mix(in srgb, var(--slate-100) 52%, white) 100%);
  border: 1px solid color-mix(in srgb, var(--border-light) 76%, var(--slate-200));
  border-radius: var(--radius-xl);
  box-shadow: 0 24px 62px rgba(15, 23, 42, 0.28), 0 1px 0 rgba(255, 255, 255, 0.6) inset;
  padding: calc(var(--space-6) + 8px) var(--space-6) calc(var(--space-8) + env(safe-area-inset-bottom));
  scroll-padding-top: calc(var(--space-6) + 8px);
  scroll-padding-bottom: calc(var(--space-8) + env(safe-area-inset-bottom));
  overscroll-behavior: contain;
}

.editorHeader {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: var(--space-5);
  padding-bottom: var(--space-3);
  border-bottom: 1px solid color-mix(in srgb, var(--border-light) 72%, var(--teal-200));
}

.editorEyebrow {
  margin: 0 0 var(--space-1) 0;
  font-size: var(--text-xs);
  font-weight: 600;
  letter-spacing: 0.06em;
  text-transform: uppercase;
  color: var(--slate-500);
}

.editorTitle {
  margin: 0;
  font-family: var(--font-display);
  font-size: clamp(30px, 2.4vw, 36px);
  letter-spacing: 0.01em;
  color: var(--slate-800);
  text-shadow: 0 1px 0 rgba(255, 255, 255, 0.52), 0 8px 24px rgba(15, 23, 42, 0.2);
}

.editorGrid {
  display: grid;
  grid-template-columns: minmax(0, 1fr);
  gap: var(--space-4);
}

.cardSwitching {
  animation: cardSourceSwitch 320ms cubic-bezier(0.22, 1, 0.36, 1);
}

@keyframes cardSourceSwitch {
  0% {
    opacity: 0.55;
    transform: translateY(10px) scale(0.992);
    filter: blur(2px);
  }
  45% {
    opacity: 0.78;
    transform: translateY(-2px) scale(1.004);
    filter: blur(0.8px);
  }
  100% {
    opacity: 1;
    transform: translateY(0) scale(1);
    filter: blur(0);
  }
}

.fixedMetaCard {
  border: 1px solid color-mix(in srgb, var(--border-light) 68%, var(--slate-200));
  border-radius: calc(var(--radius-lg) + 2px);
  background: linear-gradient(180deg, color-mix(in srgb, var(--slate-50) 72%, white), color-mix(in srgb, var(--slate-100) 40%, white));
  padding: var(--space-4);
  display: flex;
  flex-direction: column;
  gap: var(--space-3);
  box-shadow: 0 1px 0 rgba(255, 255, 255, 0.76) inset, 0 16px 32px rgba(15, 23, 42, 0.14);
}

.fixedMetaTopRow {
  display: grid;
  grid-template-columns: minmax(0, 1fr) minmax(180px, 240px);
  gap: var(--space-2);
  align-items: start;
  order: 1;
}

.fixedMetaField {
  display: flex;
  flex-direction: column;
  gap: 6px;
  min-width: 0;
}

.fixedMetaLabel {
  font-size: 11px;
  font-weight: 600;
  color: color-mix(in srgb, var(--slate-500) 85%, var(--teal-600));
  letter-spacing: 0.04em;
  text-transform: uppercase;
}

.fixedNameInput {
  font-size: var(--text-sm);
  padding: var(--space-2) var(--space-3);
}

.fixedCategorySelect {
  width: 100%;
}

.fixedSummaryTextarea {
  min-height: 74px;
  resize: vertical;
}

.fixedTagHeader {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--space-2);
}

.fixedTagHeader .tagPalette {
  margin-top: 0;
}

.aiActionRow {
  display: flex;
  align-items: center;
  gap: var(--space-2);
  flex-wrap: wrap;
}

.aiChannelSwitchInline {
  display: inline-flex;
  align-items: center;
  gap: var(--space-2);
  margin-left: auto;
}

.aiActionGroup {
  display: inline-flex;
  align-items: center;
  gap: 4px;
}

.aiChannelSwitchRow {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--space-2);
}

.aiChannelSwitchLabel {
  font-size: var(--text-xs);
  color: var(--slate-500);
}

.aiChannelSwitchGroup {
  display: inline-flex;
  align-items: center;
  border: 1px solid var(--border-light);
  border-radius: var(--radius-full);
  overflow: hidden;
}

.aiChannelSwitchButton,
.aiChannelSwitchActive {
  border: none;
  background: transparent;
  color: var(--slate-500);
  padding: 4px 10px;
  font-size: 11px;
  cursor: pointer;
  transition: all var(--transition-fast);
}

.aiChannelSwitchActive {
  background: var(--coral-500);
  color: #fff;
}

.aiWorkbench {
  border: 1px solid color-mix(in srgb, var(--teal-300) 45%, var(--border-light));
  border-radius: calc(var(--radius-lg) + 2px);
  background:
    radial-gradient(circle at 84% -8%, color-mix(in srgb, var(--teal-200) 30%, transparent), transparent 38%),
    linear-gradient(165deg, color-mix(in srgb, var(--teal-50) 68%, white), color-mix(in srgb, var(--teal-100) 46%, var(--slate-50)));
  padding: var(--space-4);
  display: flex;
  flex-direction: column;
  gap: var(--space-2);
  order: 3;
  box-shadow: 0 16px 28px rgba(8, 47, 73, 0.22), 0 1px 0 rgba(255, 255, 255, 0.34) inset;
}

.aiWorkbenchHeader h4 {
  margin: 0;
  font-size: var(--text-sm);
  color: var(--slate-800);
}

.aiWorkbenchHeader p {
  margin: var(--space-1) 0 0;
  font-size: var(--text-xs);
  color: var(--slate-600);
}


.aiGuideHeaderRow {
  display: flex;
  gap: var(--space-2);
  flex-wrap: wrap;
  align-items: center;
}

.aiModelStatus {
  font-size: var(--text-xs);
  font-weight: 600;
}

.aiModelReady {
  color: var(--teal-700);
}

.aiModelMissing {
  color: var(--rose-600);
}

.aiGuideStepTitle {
  margin: 0;
  font-size: var(--text-sm);
  font-weight: 600;
  color: var(--slate-700);
}

.aiModelSelect {
  min-width: 220px;
  border: 1px solid var(--border-light);
  border-radius: var(--radius-md);
  background: var(--bg-elevated);
  padding: var(--space-2) var(--space-3);
  font-size: var(--text-xs);
  color: var(--slate-700);
}

.aiErrorText {
  margin: 0;
  font-size: var(--text-xs);
  color: var(--rose-600);
}

.aiHint {
  margin: 0;
  font-size: var(--text-xs);
  color: var(--slate-500);
}

.aiResultBody {
  display: flex;
  flex-direction: column;
  gap: var(--space-3);
}

.aiDiffPair {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: var(--space-2);
}

.aiDiffItem {
  border: 1px solid var(--border-light);
  border-radius: var(--radius-md);
  background: var(--slate-50);
  padding: var(--space-2);
}

.aiDiffItem p {
  margin: var(--space-1) 0 0;
  font-size: var(--text-xs);
  color: var(--slate-700);
  white-space: pre-wrap;
}

.aiDiffLabel {
  font-size: 11px;
  font-weight: 600;
  letter-spacing: 0.04em;
  color: var(--slate-500);
  text-transform: uppercase;
}

.aiNormalizeDiffList {
  display: flex;
  flex-direction: column;
  gap: var(--space-2);
  max-height: 320px;
  overflow: auto;
}

.aiNormalizeDiffItem {
  border: 1px solid var(--border-light);
  border-radius: var(--radius-md);
  background: var(--slate-50);
  padding: var(--space-2);
}

.aiNormalizeHeaderRow {
  display: inline-flex;
  align-items: center;
  gap: var(--space-2);
}

.aiFilterToggle {
  display: inline-flex;
  align-items: center;
  gap: var(--space-2);
  font-size: var(--text-xs);
  color: var(--slate-600);
}

.aiNormalizeBefore,
.aiNormalizeAfter {
  margin: var(--space-1) 0 0;
  font-size: var(--text-xs);
  line-height: 1.5;
  white-space: pre-wrap;
}

.aiNormalizeBefore {
  color: var(--slate-600);
}

.aiNormalizeAfter {
  color: var(--teal-700);
}

.managerActionsRow {
  display: flex;
  justify-content: flex-end;
  gap: var(--space-2);
}

.aiSuggestionList {
  display: flex;
  flex-direction: column;
  gap: var(--space-2);
  max-height: 280px;
  overflow: auto;
}

.aiSuggestionItem {
  display: grid;
  grid-template-columns: auto minmax(0, 1fr);
  align-items: flex-start;
  gap: var(--space-2);
  border: 1px solid var(--border-light);
  border-radius: var(--radius-md);
  padding: var(--space-2);
  background: var(--slate-50);
}

.aiSuggestionTitle {
  margin: 0;
  font-size: var(--text-sm);
  font-weight: 600;
  color: var(--slate-800);
}

.aiSuggestionReason,
.aiSuggestionSample {
  margin: var(--space-1) 0 0;
  font-size: var(--text-xs);
  color: var(--slate-600);
}

.externalAiActions {
  display: flex;
  gap: var(--space-2);
  flex-wrap: wrap;
}

.schemaErrorList {
  margin: 0;
  padding-left: 18px;
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.schemaErrorItem {
  font-size: var(--text-xs);
  color: var(--rose-600);
}

.schemaErrorButton {
  border: none;
  background: transparent;
  color: inherit;
  padding: 0;
  font-size: inherit;
  cursor: pointer;
  text-decoration: underline;
}

.aiHistoryList {
  display: flex;
  flex-direction: column;
  gap: var(--space-2);
  max-height: 320px;
  overflow: auto;
}

.aiHistoryItem {
  border: 1px solid var(--border-light);
  border-radius: var(--radius-md);
  background: var(--slate-50);
  padding: var(--space-2);
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--space-2);
}

.aiHistoryTitle {
  margin: 0;
  font-size: var(--text-sm);
  font-weight: 600;
  color: var(--slate-800);
}

.aiHistoryTime {
  margin: var(--space-1) 0 0;
  font-size: var(--text-xs);
  color: var(--slate-500);
}

.polishRecentList {
  display: flex;
  flex-direction: column;
  gap: var(--space-2);
}

.polishChannelNotice {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--space-3);
  padding: var(--space-3);
  border-radius: var(--radius-lg);
  border: 1px solid color-mix(in srgb, var(--teal-300) 60%, var(--border-light));
  background:
    radial-gradient(circle at 0% 0%, color-mix(in srgb, var(--teal-100) 44%, transparent), transparent 55%),
    linear-gradient(145deg, color-mix(in srgb, var(--teal-50) 78%, white), color-mix(in srgb, var(--slate-50) 70%, white));
  box-shadow: 0 1px 0 rgba(255, 255, 255, 0.65) inset, 0 10px 22px rgba(8, 47, 73, 0.14);
}

.polishChannelTitle {
  margin: 0;
  font-size: var(--text-sm);
  font-weight: 700;
  color: color-mix(in srgb, var(--teal-700) 72%, var(--slate-700));
}

.polishRecentItem {
  border: 1px solid var(--border-light);
  background: var(--slate-50);
  border-radius: var(--radius-md);
  padding: var(--space-2);
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--space-2);
}

.polishRecentApply {
  border: none;
  background: transparent;
  text-align: left;
  min-width: 0;
  cursor: pointer;
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.polishRecentName {
  font-size: var(--text-xs);
  font-weight: 600;
  color: var(--slate-700);
}

.polishRecentContent {
  font-size: 11px;
  color: var(--slate-600);
  max-width: 380px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.polishRecentActions {
  display: inline-flex;
  gap: var(--space-1);
}

.polishRecentActionBtn {
  border: 1px solid var(--border-light);
  background: var(--bg-elevated);
  border-radius: var(--radius-sm);
  padding: 2px 8px;
  font-size: 11px;
  color: var(--slate-600);
  cursor: pointer;
}

.polishRecentActionBtn:hover,
.polishRecentApply:hover .polishRecentName {
  color: var(--teal-700);
}

.polishRecentActionBtn:hover {
  border-color: var(--teal-300);
}

.editorColumn {
  min-width: 0;
}

.customFieldCreateRow {
  display: flex;
  gap: var(--space-2);
  align-items: center;
}

.addFieldBtn {
  width: 36px;
  height: 36px;
  min-width: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--coral-500);
  border: none;
  border-radius: var(--radius-md);
  color: white;
  font-size: 18px;
  font-weight: 600;
  cursor: pointer;
  transition: all var(--transition-fast);
}

.addFieldBtn:hover {
  background: var(--coral-600);
  transform: scale(1.05);
}

.customFieldPresetRow {
  margin-top: var(--space-2);
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-2);
}

.customFieldPreset {
  border: 1px solid var(--border-light);
  background: var(--slate-50);
  border-radius: var(--radius-full);
  padding: var(--space-1) var(--space-3);
  font-size: var(--text-xs);
  color: var(--slate-600);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.customFieldPreset:hover {
  border-color: var(--coral-300);
  color: var(--coral-600);
  background: var(--coral-50);
}

.customFieldList {
  margin-top: var(--space-3);
  display: flex;
  flex-direction: column;
  gap: var(--space-3);
}

.customFieldCard {
  border: 1px solid var(--border-light);
  border-radius: var(--radius-lg);
  background: var(--bg-elevated);
  box-shadow: var(--shadow-sm);
  padding: var(--space-3);
  display: flex;
  flex-direction: column;
  gap: var(--space-2);
}

.pendingFieldCard {
  border-color: color-mix(in srgb, var(--amber-400) 56%, var(--coral-300));
  background:
    radial-gradient(circle at 100% 0%, color-mix(in srgb, var(--amber-100) 42%, transparent), transparent 34%),
    linear-gradient(180deg, color-mix(in srgb, var(--amber-50) 52%, white), color-mix(in srgb, var(--slate-50) 84%, white));
  box-shadow: 0 0 0 1px color-mix(in srgb, var(--amber-300) 35%, transparent), 0 16px 28px rgba(180, 83, 9, 0.2);
}

.pendingFieldBadge {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 2px 8px;
  border-radius: 999px;
  font-size: 11px;
  font-weight: 700;
  letter-spacing: 0.04em;
  color: color-mix(in srgb, var(--amber-700) 88%, var(--coral-700));
  background: linear-gradient(180deg, color-mix(in srgb, var(--amber-100) 90%, white), color-mix(in srgb, var(--amber-200) 76%, white));
  border: 1px solid color-mix(in srgb, var(--amber-300) 75%, var(--coral-300));
}

.customFieldHeader {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--space-2);
}

.customFieldHeaderSimple {
  display: flex;
  align-items: center;
  gap: var(--space-2);
  flex-wrap: wrap;
}

.fieldInlineActions {
  display: inline-flex;
  gap: var(--space-1);
}

.fieldOrderHandle {
  color: var(--slate-400);
  font-size: 14px;
  letter-spacing: -2px;
  cursor: grab;
  user-select: none;
}

.fieldNameInput {
  flex: 1;
  border: none;
  border-bottom: 2px solid var(--border-light);
  border-radius: 0;
  background: transparent;
  font-size: var(--text-sm);
  font-weight: 600;
  color: var(--slate-800);
  padding: var(--space-1) 0;
  transition: border-color var(--transition-fast);
}

.fieldNameInput:focus {
  outline: none;
  border-bottom-color: var(--coral-400);
}

.fieldNameInputInline {
  flex: 1;
  border: none;
  background: transparent;
  font-size: var(--text-sm);
  font-weight: 600;
  color: var(--slate-800);
  padding: 0 var(--space-1);
}

.fieldNameInputInline:focus {
  outline: none;
}

.fieldValueTextarea {
  width: 100%;
  border: 1px solid var(--border-light);
  border-radius: var(--radius-md);
  padding: var(--space-2) var(--space-3);
  font-size: var(--text-sm);
  background: var(--slate-50);
  color: var(--slate-700);
  resize: vertical;
  min-height: 60px;
  line-height: 1.5;
}

.fieldValueTextarea:focus {
  outline: none;
  border-color: var(--coral-300);
  background: var(--bg-elevated);
}

.fieldRelationSection {
  border-top: 1px solid var(--border-light);
  padding-top: var(--space-2);
  margin-top: var(--space-1);
}

.fieldRelationToggle {
  display: inline-flex;
  align-items: center;
  gap: var(--space-1);
  padding: var(--space-1) var(--space-2);
  background: var(--slate-50);
  border: 1px solid var(--border-light);
  border-radius: var(--radius-full);
  font-size: var(--text-xs);
  color: var(--slate-600);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.fieldRelationToggle:hover {
  background: var(--coral-50);
  border-color: var(--coral-200);
  color: var(--coral-600);
}

.relationIcon {
  display: flex;
  align-items: center;
}

.toggleArrow {
  font-size: 8px;
  margin-left: var(--space-1);
  opacity: 0.6;
}

.fieldRelationPanel {
  margin-top: var(--space-2);
  padding: var(--space-2);
  background: var(--slate-50);
  border-radius: var(--radius-md);
}

.fieldRelationList {
  list-style: none;
  margin: 0 0 var(--space-2);
  padding: 0;
  display: flex;
  flex-direction: column;
  gap: var(--space-1);
}

.cardLevelRelationList {
  display: flex;
  flex-direction: column;
  gap: var(--space-1);
  margin-bottom: var(--space-2);
}

.iterationEditor {
  display: flex;
  flex-direction: column;
  gap: var(--space-1);
  margin-top: var(--space-1);
  padding: var(--space-1);
  border: 1px dashed var(--border-light);
  border-radius: var(--radius-md);
  background: color-mix(in srgb, var(--slate-50) 70%, white);
}

.iterationList {
  margin-top: var(--space-1);
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.fieldDiffPanel {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: var(--space-2);
}

.fieldDiffColumn {
  border: 1px solid var(--border-light);
  border-radius: var(--radius-sm);
  padding: 6px;
  background: color-mix(in srgb, var(--slate-50) 82%, white);
}

.fieldDiffTitle {
  font-size: 11px;
  font-weight: 700;
  color: var(--slate-500);
}

.fieldDiffLineMuted,
.fieldDiffLineAdded,
.fieldDiffLineRemoved,
.fieldDiffLineChanged {
  margin: 2px 0 0;
  font-size: 11px;
  line-height: 1.35;
}

.fieldDiffLineMuted {
  color: var(--slate-500);
}

.fieldDiffLineAdded {
  color: var(--teal-700);
}

.fieldDiffLineRemoved {
  color: var(--rose-700);
}

.fieldDiffLineChanged {
  color: var(--amber-700);
}

.iterationItem {
  border: 1px solid var(--border-light);
  border-radius: var(--radius-md);
  background: color-mix(in srgb, var(--slate-50) 88%, white);
  padding: 6px 8px;
  display: flex;
  flex-direction: column;
  gap: 3px;
  position: relative;
}

.iterationSwitcherRow {
  margin-top: var(--space-1);
  display: flex;
  align-items: center;
  gap: var(--space-2);
}

.iterationSwitcherLabel {
  font-size: 11px;
  color: var(--slate-500);
  white-space: nowrap;
}

.iterationSwitcherSelect {
  flex: 1;
  min-width: 0;
  border: 1px solid var(--border-light);
  border-radius: var(--radius-sm);
  background: var(--bg-elevated);
  color: var(--slate-700);
  font-size: 11px;
  padding: 4px 8px;
}

.iterationSwitcherSelect:focus {
  outline: none;
  border-color: var(--coral-300);
}

.iterationValue {
  margin: 0;
  font-size: 12px;
  color: var(--slate-700);
  line-height: 1.4;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.iterationDrawerToggle {
  width: 100%;
  margin-top: var(--space-2);
  padding: 7px var(--space-2);
  min-height: 34px;
  border: 1px solid var(--border-light);
  border-radius: var(--radius-full);
  background: var(--slate-50);
  color: var(--slate-600);
  font-size: var(--text-xs);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--space-2);
  transition: all var(--transition-fast);
}

.iterationDrawerToggle:hover {
  border-color: var(--coral-300);
  background: var(--coral-50);
  color: var(--coral-600);
}

.iterationReasonChip {
  width: fit-content;
  max-width: 100%;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.cardIterationBoard {
  margin-top: var(--space-2);
  padding: 10px;
  border-radius: var(--radius-lg);
  border: 1px solid color-mix(in srgb, var(--coral-300) 45%, var(--border-light));
  background:
    radial-gradient(circle at 0% 0%, color-mix(in srgb, var(--coral-100) 60%, transparent), transparent 55%),
    linear-gradient(135deg, color-mix(in srgb, var(--coral-50) 80%, white), color-mix(in srgb, var(--teal-50) 65%, white));
  order: 4;
}

.cardIterationActions {
  display: inline-flex;
  gap: var(--space-2);
  flex-wrap: wrap;
  justify-content: flex-end;
}

.cardEvolutionTimeline {
  margin-top: var(--space-2);
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-1);
}

.cardEvolutionNode {
  border: 1px solid var(--border-light);
  border-radius: var(--radius-full);
  background: color-mix(in srgb, var(--slate-50) 88%, white);
  color: var(--slate-600);
  font-size: 12px;
  font-weight: 600;
  line-height: 1;
  padding: 8px 14px;
  cursor: pointer;
  transition: border-color 140ms ease, box-shadow 140ms ease, transform 140ms ease;
}

.cardEvolutionNode:hover {
  transform: translateY(-1px);
  border-color: color-mix(in srgb, var(--teal-300) 58%, var(--border-light));
  box-shadow: 0 10px 20px rgba(15, 23, 42, 0.14);
}

.cardEvolutionNodeActive {
  border-color: var(--teal-400);
  background: color-mix(in srgb, var(--teal-50) 80%, white);
  color: var(--teal-700);
  box-shadow: 0 0 0 2px color-mix(in srgb, var(--teal-200) 65%, transparent), 0 12px 24px rgba(8, 47, 73, 0.2);
}

.cardParentBadge {
  width: fit-content;
  font-size: 11px;
  color: var(--slate-600);
  border: 1px solid var(--border-light);
  border-radius: var(--radius-full);
  padding: 2px 8px;
  background: color-mix(in srgb, var(--slate-50) 86%, white);
}

.cardIterationRenameRow {
  display: grid;
  grid-template-columns: minmax(0, 1fr) auto auto;
  gap: var(--space-2);
  align-items: center;
}

.cardIterationPreviewGrid {
  display: grid;
  gap: 2px;
}

.cardIterationPreviewGrid p {
  margin: 0;
  font-size: 12px;
  color: var(--slate-700);
}

.dependencySection {
  order: 2;
}

.dependencyTagRow {
  display: flex;
  align-items: center;
  gap: var(--space-2);
  overflow-x: auto;
  padding-bottom: 2px;
}

.addDependencyIconButton {
  width: 28px;
  height: 28px;
  border-radius: 999px;
  border: 1px solid var(--border-light);
  background: linear-gradient(180deg, color-mix(in srgb, var(--slate-50) 62%, white), color-mix(in srgb, var(--slate-100) 80%, white));
  color: var(--slate-700);
  font-size: 18px;
  line-height: 1;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  flex-shrink: 0;
  box-shadow: 0 1px 0 rgba(255, 255, 255, 0.6) inset, 0 8px 16px rgba(15, 23, 42, 0.18);
}

.addDependencyIconButton:hover {
  border-color: var(--coral-300);
  color: var(--coral-700);
  transform: translateY(-1px);
}

.dependencyTag {
  border: 1px solid color-mix(in srgb, var(--border-light) 78%, var(--teal-200));
  background: linear-gradient(180deg, color-mix(in srgb, var(--slate-50) 84%, white), color-mix(in srgb, var(--slate-100) 76%, white));
  border-radius: var(--radius-full);
  padding: var(--space-1) var(--space-2);
  font-size: var(--text-xs);
  color: var(--slate-700);
  display: inline-flex;
  align-items: center;
  gap: 4px;
  white-space: nowrap;
  cursor: pointer;
  box-shadow: 0 1px 0 rgba(255, 255, 255, 0.58) inset, 0 8px 16px rgba(15, 23, 42, 0.14);
}

.dependencyTag:hover {
  border-color: var(--coral-300);
  color: var(--coral-700);
  transform: translateY(-1px);
}

.summarySection {
  order: 5;
}

.cardIterationHead {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: var(--space-2);
}

.cardIterationHead h4 {
  margin: 0;
  font-size: var(--text-sm);
  color: var(--slate-800);
}

.cardIterationHead p {
  margin: 2px 0 0;
  font-size: var(--text-xs);
  color: var(--slate-600);
}

.cardIterationItem {
  border-color: color-mix(in srgb, var(--coral-300) 45%, var(--border-light));
  box-shadow: 0 6px 18px rgba(244, 99, 71, 0.12);
}

.cardIterationItemActive {
  border-color: var(--teal-400);
  box-shadow: 0 0 0 2px color-mix(in srgb, var(--teal-200) 58%, transparent), 0 14px 28px rgba(8, 47, 73, 0.2);
}

.iterationDraftSection {
  display: flex;
  flex-direction: column;
  gap: var(--space-2);
}

.iterationDraftLabel {
  font-size: var(--text-xs);
  color: var(--slate-600);
}

.currentIterationBadge {
  display: inline-flex;
  align-items: center;
  max-width: 320px;
  padding: 2px 8px;
  border-radius: 999px;
  border: 1px solid var(--rose-600);
  background: var(--rose-600);
  color: #fff;
  font-size: 11px;
  line-height: 1.3;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.iterationVersionTag {
  display: inline-flex;
  align-items: center;
  border: 1px solid var(--rose-600);
  background: var(--rose-600);
  color: #fff;
  border-radius: var(--radius-full);
  padding: 4px 12px;
  font-size: 13px;
  font-weight: 600;
  line-height: 1.2;
}

.iterationVersionButton {
  cursor: pointer;
  transition: transform 140ms ease, box-shadow 140ms ease;
}

.iterationVersionButton:hover {
  transform: translateY(-1px);
  box-shadow: 0 10px 20px rgba(244, 63, 94, 0.22);
}

.iterationReasonButton {
  cursor: pointer;
  border: 1px solid color-mix(in srgb, var(--border-light) 70%, var(--slate-300));
  background: color-mix(in srgb, var(--slate-50) 88%, white);
  transition: border-color 140ms ease, transform 140ms ease;
}

.iterationReasonButton:hover {
  transform: translateY(-1px);
  border-color: var(--coral-300);
}

.iterationVersionTagCorner {
  position: absolute;
  top: 6px;
  right: 8px;
}

.fieldRelationItem {
  display: flex;
  align-items: center;
  gap: var(--space-2);
  padding: var(--space-1) var(--space-2);
  background: var(--bg-elevated);
  border-radius: var(--radius-sm);
  font-size: var(--text-xs);
}

.fieldRelationItem .relationType {
  color: var(--coral-500);
  font-weight: 500;
}

.fieldRelationItem .relationTarget {
  color: var(--slate-700);
  flex: 1;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.removeRelationBtn {
  width: 18px;
  height: 18px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: transparent;
  border: none;
  color: var(--slate-400);
  cursor: pointer;
  font-size: 14px;
  line-height: 1;
  border-radius: var(--radius-sm);
  transition: all var(--transition-fast);
}

.removeRelationBtn:hover {
  background: var(--rose-100);
  color: var(--rose-600);
}

.fieldRelationAdd {
  display: grid;
  grid-template-columns: minmax(0, 1fr) minmax(0, 1fr) 100px auto;
  gap: var(--space-2);
  align-items: center;
}

.relationSelect {
  flex: 1;
  min-width: 0;
  border: 1px solid var(--border-light);
  border-radius: var(--radius-md);
  padding: var(--space-1) var(--space-2);
  font-size: var(--text-xs);
  background: var(--bg-elevated);
  color: var(--slate-700);
}

.relationTypeInput {
  width: 80px;
  min-width: 60px;
  border: 1px solid var(--border-light);
  border-radius: var(--radius-md);
  padding: var(--space-1) var(--space-2);
  font-size: var(--text-xs);
  background: var(--bg-elevated);
  color: var(--slate-700);
}

.addRelationBtn {
  width: 28px;
  height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--coral-500);
  border: none;
  border-radius: var(--radius-md);
  color: white;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
  transition: all var(--transition-fast);
}

.addRelationBtn:hover:not(:disabled) {
  background: var(--coral-600);
}

.addRelationBtn:disabled {
  background: var(--slate-300);
  cursor: not-allowed;
}

.deleteFieldBtn {
  align-self: flex-start;
  padding: var(--space-1) var(--space-2);
  background: transparent;
  border: 1px solid var(--border-light);
  border-radius: var(--radius-sm);
  font-size: var(--text-xs);
  color: var(--slate-500);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.deleteFieldBtn:hover {
  background: var(--rose-50);
  border-color: var(--rose-200);
  color: var(--rose-600);
}

.fieldBoardHint {
  margin-top: var(--space-3);
  font-size: var(--text-xs);
  color: color-mix(in srgb, var(--slate-500) 78%, var(--teal-600));
}

.editorFieldList {
  margin-top: var(--space-3);
  display: flex;
  flex-direction: column;
  gap: var(--space-3);
  max-height: min(72vh, 880px);
  overflow-y: auto;
  padding-right: var(--space-1);
}

.fieldBoard {
  margin-top: var(--space-2);
  border: 1px dashed var(--border-light);
  border-radius: var(--radius-lg);
  background: linear-gradient(90deg, rgba(15, 23, 42, 0.04) 1px, transparent 1px), linear-gradient(rgba(15, 23, 42, 0.04) 1px, transparent 1px);
  background-size: 24px 24px;
  min-height: 560px;
  position: relative;
  overflow: auto;
}

.fieldBoardFullPage {
  margin-top: var(--space-2);
  border: 1px dashed var(--border-light);
  border-radius: var(--radius-lg);
  background: linear-gradient(90deg, rgba(15, 23, 42, 0.04) 1px, transparent 1px), linear-gradient(rgba(15, 23, 42, 0.04) 1px, transparent 1px);
  background-size: 24px 24px;
  min-height: min(76vh, 920px);
  position: relative;
  overflow: auto;
}

.fieldBoardItem {
  position: absolute;
  margin-bottom: 0;
  z-index: 1;
}

.draggingField {
  z-index: 4;
  box-shadow: var(--shadow-lg);
  opacity: 0.7;
}

.dropIndicatorBefore,
.dropIndicatorAfter {
  position: relative;
}

.dropIndicatorBefore::before,
.dropIndicatorAfter::after {
  content: '';
  position: absolute;
  left: 10px;
  right: 10px;
  height: 3px;
  border-radius: 999px;
  background: var(--coral-400);
  box-shadow: 0 0 0 2px color-mix(in srgb, var(--coral-400) 18%, transparent);
}

.dropIndicatorBefore::before {
  top: -6px;
}

.dropIndicatorAfter::after {
  bottom: -6px;
}

.fieldCardHead {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--space-2);
  cursor: move;
  user-select: none;
  padding-bottom: var(--space-2);
  border-bottom: 1px solid var(--border-light);
  margin-bottom: var(--space-2);
}

.fieldCardHandle {
  font-size: 16px;
  color: var(--slate-400);
  letter-spacing: -2px;
}

.customFieldItem {
  border: 1px solid var(--border-light);
  border-radius: var(--radius-md);
  padding: var(--space-3);
  background: var(--slate-50);
  display: flex;
  flex-direction: column;
  gap: var(--space-2);
  break-inside: avoid;
  margin-bottom: var(--space-3);
}

.fieldSizesm {
  min-height: 140px;
}

.fieldSizemd {
  min-height: 210px;
}

.fieldSizelg {
  min-height: 290px;
}

.customFieldSizeRow {
  display: flex;
  align-items: center;
  gap: var(--space-1);
}

.customFieldSizeLabel {
  font-size: var(--text-xs);
  color: var(--slate-500);
  margin-right: var(--space-1);
}

.sizeBtn {
  width: 24px;
  height: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  border: 1px solid var(--border-light);
  border-radius: var(--radius-sm);
  background: var(--bg-elevated);
  color: var(--slate-500);
  font-size: 11px;
  font-weight: 600;
  cursor: pointer;
  transition: all var(--transition-fast);
}

.sizeBtn:hover {
  border-color: var(--coral-300);
  color: var(--coral-600);
}

.sizeBtnActive {
  background: var(--coral-500);
  border-color: var(--coral-500);
  color: white;
}

.customFieldSizeButton {
  border: 1px solid var(--border-light);
  border-radius: var(--radius-full);
  background: var(--bg-elevated);
  color: var(--slate-600);
  font-size: 11px;
  padding: 2px 8px;
  cursor: pointer;
}

.customFieldSizeButtonActive {
  border-color: var(--coral-300);
  background: var(--coral-100);
  color: var(--coral-700);
}

.customFieldPreview {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-2);
  margin-bottom: var(--space-2);
}

.customFieldChip {
  border: 1px solid var(--border-light);
  background: var(--slate-50);
  border-radius: var(--radius-full);
  padding: var(--space-1) var(--space-2);
  font-size: var(--text-xs);
  color: var(--slate-600);
}

.managerCard {
  width: min(560px, 100%);
  background: var(--bg-elevated);
  border: 1px solid var(--border-light);
  border-radius: var(--radius-xl);
  box-shadow: var(--shadow-xl);
  padding: var(--space-5);
  display: flex;
  flex-direction: column;
  gap: var(--space-4);
}

.managerHeader h3 {
  margin: 0;
  font-family: var(--font-display);
  font-size: var(--text-xl);
  color: var(--slate-800);
}

.managerRow {
  display: flex;
  align-items: center;
  gap: var(--space-2);
  flex-wrap: wrap;
}

.managerList {
  display: flex;
  flex-direction: column;
  gap: var(--space-2);
  max-height: 300px;
  overflow-y: auto;
}

.quickTypeGrid {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-2);
}

.quickTypeButton {
  border: 1px solid var(--border-light);
  border-radius: var(--radius-md);
  background: white;
  padding: 6px 12px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  color: var(--slate-700);
  cursor: pointer;
  font-size: var(--text-sm);
  font-weight: 600;
}

.quickTypeButton:hover {
  border-color: var(--coral-300);
  background: var(--coral-50);
}

.templatePickMain {
  display: flex;
  flex-direction: column;
  gap: 4px;
  min-width: 0;
}

.templatePickSummary {
  font-size: 11px;
  color: var(--slate-500);
  line-height: 1.4;
  text-wrap: pretty;
}

.templatePickItem {
  border: 1px solid var(--border-light);
  border-radius: var(--radius-md);
  background: var(--slate-50);
  padding: var(--space-3);
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--space-2);
  cursor: pointer;
  text-align: left;
}

.templatePickItem:hover {
  border-color: var(--coral-300);
}

.templatePickMeta {
  font-size: var(--text-xs);
  color: var(--slate-500);
}

.apiGuideCard {
  margin-top: var(--space-3);
  border: 1px solid var(--border-light);
  border-radius: var(--radius-md);
  background: var(--slate-50);
  padding: var(--space-3);
  display: flex;
  flex-direction: column;
  gap: var(--space-1);
}

.apiGuideTitle {
  margin: 0;
  font-size: var(--text-xs);
  font-weight: 600;
  color: var(--slate-700);
}

.apiGuideText {
  margin: 0;
  font-size: var(--text-xs);
  color: var(--slate-600);
  line-height: 1.5;
}

.apiGuideMeta {
  margin: 0;
  font-size: var(--text-xs);
  color: var(--slate-500);
}

.managerListItem {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--space-3);
  padding: var(--space-2) var(--space-3);
  border-radius: var(--radius-md);
  background: var(--slate-50);
}

.managerTagName {
  display: inline-flex;
  align-items: center;
  gap: var(--space-2);
  font-size: var(--text-sm);
  color: var(--slate-700);
}

.managerActions {
  display: inline-flex;
  align-items: center;
  gap: var(--space-2);
}

.managerInlineEditor {
  display: flex;
  align-items: center;
  gap: var(--space-2);
  flex: 1;
  min-width: 0;
}

.tagPaletteItem {
  display: flex;
  align-items: center;
  justify-content: flex-start;
  gap: var(--space-2);
  width: 100%;
  border: none;
  border-radius: var(--radius-sm);
  background: transparent;
  padding: var(--space-2);
  text-align: left;
  cursor: pointer;
}

.tagPaletteItem:hover {
  background: var(--slate-50);
}

.cardIterationEntryRow {
  margin-top: var(--space-2);
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-2);
}

.categoryInput:focus-visible,
.categorySelect:focus-visible {
  outline: 2px solid var(--border-focus);
  outline-offset: 1px;
}

@keyframes slideInRight {
  from { opacity: 0; transform: translateX(20px); }
  to { opacity: 1; transform: translateX(0); }
}

.closeDetail {
  position: absolute;
  top: var(--space-4);
  right: var(--space-4);
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--slate-100);
  border: none;
  border-radius: var(--radius-md);
  color: var(--slate-500);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.closeDetail:hover {
  background: var(--rose-100);
  color: var(--rose-600);
}

.closeDetail svg {
  width: 18px;
  height: 18px;
}

.detailHeader {
  margin-bottom: var(--space-6);
  padding-right: var(--space-8);
}

.previewHero {
  margin-bottom: var(--space-6);
  padding: var(--space-4);
  border-radius: var(--radius-xl);
  border: 1px solid color-mix(in srgb, var(--preview-accent, var(--coral-400)) 28%, white);
  background:
    radial-gradient(circle at top right, color-mix(in srgb, var(--preview-accent, var(--coral-400)) 22%, white) 0%, transparent 56%),
    linear-gradient(160deg, color-mix(in srgb, var(--preview-accent, var(--coral-400)) 9%, white), var(--bg-elevated));
  display: flex;
  flex-direction: column;
  gap: var(--space-3);
  box-shadow: var(--shadow-md);
}

.previewSubtitle {
  margin: var(--space-2) 0 0;
  font-size: var(--text-sm);
  color: var(--slate-600);
}

.previewShortcutHint {
  margin: var(--space-2) 0 0;
  font-size: 11px;
  color: var(--slate-500);
}

.previewActions {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-2);
}

.previewTagChip {
  border: 1px solid var(--border-light);
  background: var(--bg-elevated);
  border-radius: var(--radius-full);
  padding: var(--space-1) var(--space-2);
  font-size: var(--text-xs);
  color: var(--slate-700);
  display: inline-flex;
  align-items: center;
  gap: var(--space-1);
}

.previewFieldList {
  display: flex;
  flex-direction: column;
  gap: var(--space-3);
}

.previewFieldCard {
  border: 1px solid var(--border-light);
  border-radius: var(--radius-lg);
  background: linear-gradient(180deg, var(--bg-elevated), var(--slate-50));
  padding: var(--space-3);
  display: flex;
  flex-direction: column;
  gap: var(--space-2);
}

.previewFieldHeader {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--space-2);
  font-size: var(--text-sm);
  font-weight: 600;
  color: var(--slate-800);
}

.previewFieldCount {
  font-size: var(--text-xs);
  color: var(--slate-500);
}

.previewFieldValue {
  margin: 0;
  font-size: var(--text-sm);
  line-height: 1.6;
  color: var(--slate-700);
  white-space: pre-wrap;
}

.previewRelationList {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-2);
}

.previewRelationButton {
  border: 1px solid var(--border-light);
  background: color-mix(in srgb, var(--coral-50) 82%, white);
  border-radius: var(--radius-full);
  padding: var(--space-1) var(--space-2);
  font-size: var(--text-xs);
  color: var(--coral-700);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.previewRelationButton:hover {
  border-color: var(--coral-300);
  transform: translateY(-1px);
}

.detailDeleteCardButton {
  margin-top: var(--space-3);
  color: var(--rose-600);
}

.detailDeleteCardButton:hover {
  background: var(--rose-50);
}

.detailType {
  font-size: var(--text-xs);
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.1em;
}

.detailTitle {
  font-family: var(--font-display);
  font-size: var(--text-2xl);
  margin: var(--space-1) 0 0 0;
  color: var(--slate-800);
}

.detailSection {
  margin-bottom: var(--space-6);
  display: flex;
  flex-direction: column;
  gap: var(--space-2);
  padding: var(--space-3);
  border: 1px solid color-mix(in srgb, var(--border-light) 70%, var(--slate-200));
  border-radius: var(--radius-lg);
  background: linear-gradient(180deg, color-mix(in srgb, var(--slate-50) 75%, white), color-mix(in srgb, var(--slate-100) 55%, white));
  box-shadow: 0 1px 0 rgba(255, 255, 255, 0.62) inset;
}

.detailSection h4 {
  font-family: var(--font-body);
  font-size: var(--text-xs);
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  color: var(--slate-400);
  margin: 0 0 var(--space-2) 0;
  display: inline-flex;
  align-items: center;
  gap: 8px;
}

.detailSection h4::before {
  content: '';
  width: 7px;
  height: 7px;
  border-radius: 999px;
  background: linear-gradient(135deg, var(--teal-400), var(--coral-400));
  box-shadow: 0 0 0 3px color-mix(in srgb, var(--teal-100) 55%, transparent);
}

.detailSection p {
  font-size: var(--text-sm);
  color: var(--slate-600);
  margin: 0;
  line-height: 1.6;
}

.relationItem {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--space-2);
  padding: var(--space-2) var(--space-3);
  background: var(--slate-50);
  border-radius: var(--radius-md);
  font-size: var(--text-sm);
}

.relationType {
  color: var(--slate-400);
}

.relationTarget {
  font-weight: 500;
  color: var(--slate-700);
}

.relationTargetLink {
  border: none;
  background: transparent;
  color: var(--slate-700);
  font-size: var(--text-xs);
  font-weight: 500;
  flex: 1;
  text-align: left;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  cursor: pointer;
  padding: 0;
}

.relationTargetLink:hover {
  color: var(--coral-600);
}

.emptyState {
  font-size: var(--text-sm);
  color: var(--slate-400);
  font-style: italic;
}

.tagList {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-2);
}

.tag {
  padding: var(--space-1) var(--space-3);
  background: var(--violet-100);
  color: var(--violet-700);
  font-size: var(--text-xs);
  font-weight: 500;
  border-radius: var(--radius-full);
}

@media (prefers-color-scheme: dark) {
  .listPanel {
    background: var(--slate-800);
  }

  .listItem:hover {
    background: var(--slate-700);
  }

  .listItem.selected {
    background: rgba(249, 107, 71, 0.1);
  }

  .listItemTitle {
    color: var(--slate-200);
  }

  .canvasArea {
    background: 
      linear-gradient(90deg, var(--slate-700) 1px, transparent 1px),
      linear-gradient(var(--slate-700) 1px, transparent 1px),
      var(--slate-800);
    background-size: 40px 40px;
  }

  .canvasCardInner {
    background: var(--slate-700);
    border-color: var(--slate-600);
  }

  .canvasCardTitle {
    color: var(--slate-100);
  }

  .canvasControls {
    background: var(--slate-700);
  }

  .canvasHint {
    background: rgba(30, 41, 59, 0.8);
    border-color: var(--slate-600);
    color: var(--slate-300);
  }

  .canvasControl:hover {
    background: var(--slate-600);
    color: var(--slate-100);
  }

  .detailTitle {
    color: var(--slate-100);
  }

  .previewHero {
    border-color: color-mix(in srgb, var(--preview-accent, var(--coral-400)) 35%, var(--slate-600));
    background:
      radial-gradient(circle at top right, color-mix(in srgb, var(--preview-accent, var(--coral-400)) 28%, transparent) 0%, transparent 56%),
      linear-gradient(160deg, color-mix(in srgb, var(--preview-accent, var(--coral-400)) 12%, var(--slate-800)), var(--slate-800));
  }

  .previewDialog {
    background: var(--slate-800);
    border-color: var(--slate-600);
  }

  .previewWindowTitle {
    color: var(--slate-100);
  }

  .previewWindowButton {
    border-color: var(--slate-600);
    background: var(--slate-800);
    color: var(--slate-300);
  }

  .previewWindowButton:hover {
    border-color: var(--coral-400);
    color: var(--coral-300);
  }

  .previewSubtitle,
  .previewFieldCount {
    color: var(--slate-300);
  }

  .previewShortcutHint {
    color: var(--slate-400);
  }

  .previewTagChip {
    border-color: var(--slate-600);
    color: var(--slate-200);
    background: var(--slate-800);
  }

  .previewFieldCard {
    border-color: var(--slate-600);
    background: linear-gradient(180deg, var(--slate-800), var(--slate-700));
  }

  .previewFieldHeader,
  .previewFieldValue {
    color: var(--slate-100);
  }

  .previewRelationButton {
    border-color: var(--slate-500);
    background: rgba(249, 107, 71, 0.16);
    color: var(--coral-200);
  }

  .previewRelationButton:hover {
    border-color: var(--coral-300);
  }

  .summaryPanel {
    border-right-color: var(--slate-700);
  }

  .summaryItem {
    background: var(--slate-700);
    color: var(--slate-200);
  }

  .summaryItem strong {
    color: var(--slate-50);
  }

  .categoryFilter {
    border-color: var(--slate-600);
    color: var(--slate-300);
  }

  .toolbox {
    border-color: var(--slate-600);
    background: var(--slate-800);
  }

  .folderBlock {
    border-color: var(--slate-600);
    background: var(--slate-800);
  }

  .folderHeader {
    color: var(--slate-200);
  }

  .folderHeader:hover {
    background: var(--slate-700);
  }

  .folderHeaderActive {
    background: rgba(249, 107, 71, 0.14);
  }

  .summaryHint,
  .folderCount {
    color: var(--slate-300);
  }

  .detailQuickCreateRow {
    align-items: stretch;
  }

  .tagInput {
    border-color: var(--slate-600);
    background: var(--slate-800);
    color: var(--slate-200);
  }

  .tagFilter,
  .tagChip {
    border-color: var(--slate-600);
    color: var(--slate-300);
    background: var(--slate-800);
  }

  .tagFilter:hover,
  .tagChip:hover {
    border-color: var(--coral-400);
    color: var(--coral-300);
  }

  .activeTagFilter {
    background: rgba(249, 107, 71, 0.16);
    color: var(--coral-200);
  }

  .tagSearchDropdown {
    background: var(--slate-800);
    border-color: var(--slate-600);
  }

  .tagSearchItem,
  .tagCreateItem {
    color: var(--slate-200);
  }

  .activeSearchItem {
    background: var(--slate-700);
    color: var(--coral-200);
  }

  .tagSearchItem:hover,
  .tagCreateItem:hover {
    background: var(--slate-700);
  }

  .managerCard {
    background: var(--slate-800);
    border-color: var(--slate-600);
  }

  .editorPage {
    background:
      radial-gradient(circle at 10% 4%, rgba(45, 212, 191, 0.12), transparent 33%),
      radial-gradient(circle at 92% -2%, rgba(251, 146, 60, 0.12), transparent 30%),
      linear-gradient(180deg, rgba(30, 41, 59, 0.96), rgba(15, 23, 42, 0.98));
    border-color: var(--slate-600);
    box-shadow: 0 28px 66px rgba(2, 6, 23, 0.62), 0 1px 0 rgba(148, 163, 184, 0.12) inset;
  }

  .editorEyebrow {
    color: var(--slate-400);
  }

  .editorTitle {
    color: var(--slate-100);
  }

  .customFieldPreset,
  .customFieldChip,
  .customFieldItem,
  .customFieldCard {
    background: var(--slate-700);
    border-color: var(--slate-600);
    color: var(--slate-200);
  }

  .pendingFieldCard {
    border-color: color-mix(in srgb, var(--amber-400) 42%, var(--coral-400));
    background:
      radial-gradient(circle at 100% 0%, rgba(251, 191, 36, 0.2), transparent 36%),
      linear-gradient(180deg, rgba(71, 85, 105, 0.92), rgba(30, 41, 59, 0.96));
    box-shadow: 0 0 0 1px rgba(251, 191, 36, 0.28), 0 18px 30px rgba(15, 23, 42, 0.42);
  }

  .pendingFieldBadge {
    color: var(--amber-100);
    background: linear-gradient(180deg, rgba(217, 119, 6, 0.72), rgba(180, 83, 9, 0.86));
    border-color: rgba(251, 191, 36, 0.5);
  }

  .fixedMetaCard {
    background: linear-gradient(180deg, rgba(51, 65, 85, 0.92), rgba(30, 41, 59, 0.95));
    border-color: var(--slate-600);
    box-shadow: 0 1px 0 rgba(148, 163, 184, 0.12) inset, 0 16px 28px rgba(2, 6, 23, 0.36);
  }

  .aiModelSelect,
  .aiSuggestionItem,
  .aiDiffItem,
  .aiNormalizeDiffItem {
    background: var(--slate-800);
    border-color: var(--slate-600);
    color: var(--slate-200);
  }

  .aiErrorText {
    color: var(--rose-300);
  }

  .aiHint,
  .aiSuggestionReason,
  .aiSuggestionSample,
  .aiDiffLabel,
  .aiNormalizeBefore,
  .aiFilterToggle,
  .aiHistoryTime,
  .aiGuideStepTitle {
    color: var(--slate-300);
  }

  .aiModelReady {
    color: var(--teal-300);
  }

  .aiModelMissing {
    color: var(--rose-300);
  }

  .aiSuggestionTitle,
  .aiDiffItem p,
  .aiNormalizeAfter,
  .aiHistoryTitle {
    color: var(--slate-100);
  }

  .aiWorkbench {
    background:
      radial-gradient(circle at 88% -8%, rgba(45, 212, 191, 0.18), transparent 36%),
      linear-gradient(165deg, rgba(15, 118, 110, 0.22), rgba(15, 23, 42, 0.95));
    border-color: var(--slate-600);
    box-shadow: 0 16px 30px rgba(2, 6, 23, 0.4), 0 1px 0 rgba(45, 212, 191, 0.14) inset;
  }

  .aiWorkbenchHeader h4 {
    color: var(--slate-100);
  }

  .aiWorkbenchHeader p {
    color: var(--slate-300);
  }


  .aiHistoryItem {
    background: var(--slate-800);
    border-color: var(--slate-600);
  }

  .polishRecentItem {
    background: var(--slate-800);
    border-color: var(--slate-600);
  }

  .polishRecentName {
    color: var(--slate-100);
  }

  .polishRecentContent {
    color: var(--slate-300);
  }

  .polishRecentActionBtn {
    background: var(--slate-700);
    border-color: var(--slate-600);
    color: var(--slate-200);
  }

  .polishRecentActionBtn:hover,
  .polishRecentApply:hover .polishRecentName {
    border-color: var(--teal-300);
    color: var(--teal-300);
  }

  .schemaErrorItem {
    color: var(--rose-300);
  }

  .fixedMetaLabel {
    color: var(--slate-300);
  }

  .customFieldPreset:hover {
    border-color: var(--coral-400);
    color: var(--coral-300);
  }

  .fieldNameInput,
  .fieldNameInputInline {
    color: var(--slate-100);
    border-bottom-color: var(--slate-600);
  }

  .fieldNameInput:focus {
    border-bottom-color: var(--coral-400);
  }

  .fieldValueTextarea {
    background: var(--slate-800);
    border-color: var(--slate-600);
    color: var(--slate-200);
  }

  .fieldValueTextarea:focus {
    background: var(--slate-700);
    border-color: var(--coral-400);
  }

  .fieldRelationToggle {
    background: var(--slate-800);
    border-color: var(--slate-600);
    color: var(--slate-300);
  }

  .fieldRelationToggle:hover {
    background: rgba(249, 107, 71, 0.16);
    border-color: var(--coral-400);
    color: var(--coral-200);
  }

  .fieldRelationPanel {
    background: var(--slate-800);
  }

  .fieldRelationItem {
    background: var(--slate-700);
  }

  .fieldRelationItem .relationType {
    color: var(--coral-400);
  }

  .fieldRelationItem .relationTarget {
    color: var(--slate-200);
  }

  .removeRelationBtn {
    color: var(--slate-500);
  }

  .removeRelationBtn:hover {
    background: rgba(244, 63, 94, 0.16);
    color: var(--rose-400);
  }

  .relationSelect,
  .relationTypeInput {
    background: var(--slate-800);
    border-color: var(--slate-600);
    color: var(--slate-200);
  }

  .iterationEditor,
  .iterationItem {
    background: var(--slate-800);
    border-color: var(--slate-600);
  }

  .iterationSwitcherLabel,
  .iterationValue,
  .currentIterationBadge {
    color: var(--slate-200);
  }

  .iterationVersionTag {
    background: color-mix(in srgb, var(--coral-700) 30%, var(--slate-800));
    border-color: var(--coral-500);
    color: var(--coral-200);
  }

  .iterationSwitcherSelect {
    background: var(--slate-800);
    border-color: var(--slate-600);
    color: var(--slate-100);
  }

  .iterationDrawerToggle {
    background: var(--slate-800);
    border-color: var(--slate-600);
    color: var(--slate-300);
  }

  .iterationDrawerToggle:hover {
    border-color: var(--coral-400);
    background: rgba(249, 107, 71, 0.16);
    color: var(--coral-200);
  }

  .aiChannelSwitchLabel {
    color: var(--slate-400);
  }

  .aiChannelSwitchGroup {
    border-color: var(--slate-600);
  }

  .aiChannelSwitchButton {
    color: var(--slate-300);
  }

  .aiChannelSwitchActive {
    background: var(--coral-600);
    color: #fff;
  }

  .polishChannelNotice {
    border-color: color-mix(in srgb, var(--teal-300) 35%, var(--slate-600));
    background:
      radial-gradient(circle at 0% 0%, rgba(45, 212, 191, 0.16), transparent 58%),
      linear-gradient(145deg, rgba(15, 118, 110, 0.18), rgba(30, 41, 59, 0.94));
    box-shadow: 0 1px 0 rgba(45, 212, 191, 0.18) inset, 0 12px 24px rgba(2, 6, 23, 0.42);
  }

  .polishChannelTitle {
    color: color-mix(in srgb, var(--teal-200) 82%, var(--slate-100));
  }

  .cardIterationBoard {
    border-color: var(--slate-600);
    background:
      radial-gradient(circle at 0% 0%, rgba(249, 107, 71, 0.18), transparent 55%),
      linear-gradient(135deg, rgba(30, 41, 59, 0.9), rgba(15, 23, 42, 0.94));
  }

  .cardIterationHead h4 {
    color: var(--slate-100);
  }

  .cardIterationHead p,
  .iterationDraftLabel {
    color: var(--slate-300);
  }

  .cardIterationItem {
    border-color: var(--slate-600);
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
  }

  .cardIterationItemActive {
    border-color: rgba(45, 212, 191, 0.55);
    box-shadow: 0 0 0 2px rgba(45, 212, 191, 0.25), 0 16px 30px rgba(2, 6, 23, 0.42);
  }

  .fieldDiffColumn {
    border-color: var(--slate-600);
    background: linear-gradient(180deg, rgba(51, 65, 85, 0.82), rgba(30, 41, 59, 0.9));
  }

  .fieldDiffTitle,
  .fieldDiffLineMuted {
    color: var(--slate-300);
  }

  .fieldDiffLineAdded {
    color: var(--teal-200);
  }

  .fieldDiffLineRemoved {
    color: var(--rose-200);
  }

  .fieldDiffLineChanged {
    color: var(--amber-200);
  }

  .cardEvolutionNode {
    border-color: var(--slate-600);
    background: linear-gradient(180deg, rgba(51, 65, 85, 0.88), rgba(30, 41, 59, 0.92));
    color: var(--slate-300);
  }

  .cardEvolutionNodeActive {
    border-color: rgba(45, 212, 191, 0.55);
    background: linear-gradient(180deg, rgba(15, 118, 110, 0.32), rgba(30, 41, 59, 0.94));
    color: var(--teal-100);
  }

  .iterationVersionButton:hover {
    box-shadow: 0 10px 20px rgba(244, 63, 94, 0.28);
  }

  .iterationReasonButton {
    border-color: var(--slate-600);
    background: linear-gradient(180deg, rgba(51, 65, 85, 0.88), rgba(30, 41, 59, 0.92));
  }

  .iterationReasonButton:hover {
    border-color: var(--coral-400);
  }

  .cardParentBadge {
    border-color: var(--slate-600);
    background: linear-gradient(180deg, rgba(51, 65, 85, 0.88), rgba(30, 41, 59, 0.92));
    color: var(--slate-300);
  }

  .addTagIconButton {
    background: var(--slate-800);
    border-color: var(--slate-600);
    color: var(--slate-300);
  }

  .addTagIconButton:hover {
    border-color: var(--coral-400);
    color: var(--coral-200);
  }

  .addDependencyIconButton {
    background: var(--slate-800);
    border-color: var(--slate-600);
    color: var(--slate-300);
  }

  .addDependencyIconButton:hover {
    border-color: var(--coral-400);
    color: var(--coral-200);
  }

  .tagPaletteItem:hover {
    background: rgba(148, 163, 184, 0.12);
  }

  .dependencyTag {
    border-color: var(--slate-600);
    background: linear-gradient(180deg, rgba(51, 65, 85, 0.9), rgba(30, 41, 59, 0.94));
    box-shadow: 0 1px 0 rgba(148, 163, 184, 0.12) inset, 0 8px 16px rgba(2, 6, 23, 0.28);
  }

  .fieldBoardHint {
    color: color-mix(in srgb, var(--slate-300) 84%, var(--teal-200));
  }

  .detailSection {
    background: linear-gradient(180deg, rgba(51, 65, 85, 0.86), rgba(30, 41, 59, 0.9));
    border-color: var(--slate-600);
    box-shadow: 0 1px 0 rgba(148, 163, 184, 0.12) inset;
  }

  .addRelationBtn {
    background: var(--coral-600);
  }

  .addRelationBtn:hover:not(:disabled) {
    background: var(--coral-500);
  }

  .addRelationBtn:disabled {
    background: var(--slate-600);
  }

  .deleteFieldBtn {
    border-color: var(--slate-600);
    color: var(--slate-400);
  }

  .deleteFieldBtn:hover {
    background: rgba(244, 63, 94, 0.16);
    border-color: var(--rose-400);
    color: var(--rose-400);
  }

  .sizeBtn {
    background: var(--slate-800);
    border-color: var(--slate-600);
    color: var(--slate-400);
  }

  .sizeBtn:hover {
    border-color: var(--coral-400);
    color: var(--coral-300);
  }

  .sizeBtnActive {
    background: var(--coral-600);
    border-color: var(--coral-600);
    color: white;
  }

  .addFieldBtn {
    background: var(--coral-600);
  }

  .addFieldBtn:hover {
    background: var(--coral-500);
  }

  .customFieldSizeLabel {
    color: var(--slate-300);
  }

  .customFieldSizeButton {
    background: var(--slate-800);
    border-color: var(--slate-600);
    color: var(--slate-300);
  }

  .customFieldSizeButtonActive {
    background: rgba(249, 107, 71, 0.16);
    color: var(--coral-200);
    border-color: var(--coral-400);
  }

  .fieldCardHandle {
    color: var(--slate-500);
  }

  .fieldBoard,
  .fieldBoardFullPage {
    border-color: var(--slate-600);
    background: linear-gradient(90deg, rgba(148, 163, 184, 0.12) 1px, transparent 1px), linear-gradient(rgba(148, 163, 184, 0.12) 1px, transparent 1px);
    background-size: 24px 24px;
  }

  .fieldBoardHint,
  .fieldCardHandle {
    color: var(--slate-300);
  }

  .managerHeader h3,
  .managerTagName {
    color: var(--slate-100);
  }

  .managerListItem {
    background: var(--slate-700);
  }

  .templatePickItem {
    background: var(--slate-700);
    border-color: var(--slate-600);
  }

  .apiGuideCard {
    background: var(--slate-700);
    border-color: var(--slate-600);
  }

  .apiGuideTitle,
  .apiGuideText,
  .apiGuideMeta {
    color: var(--slate-200);
  }

  .templatePickMeta {
    color: var(--slate-300);
  }

  .categoryFilter:hover {
    border-color: var(--coral-400);
    color: var(--coral-300);
  }

  .activeCategory {
    background: rgba(249, 107, 71, 0.16);
    color: var(--coral-200);
  }

  .categoryInput,
  .categorySelect,
  .detailInput,
  .detailTextarea {
    border-color: var(--slate-600);
    background: var(--slate-800);
    color: var(--slate-200);
  }

  .uploadButton {
    border-color: var(--slate-600);
    background: var(--slate-800);
    color: var(--slate-200);
  }

  .uploadButton:hover {
    border-color: var(--coral-400);
    color: var(--coral-300);
  }

  .imagePreview {
    border-color: var(--slate-600);
  }

  .detailSection p {
    color: var(--slate-300);
  }

  .relationItem {
    background: var(--slate-700);
  }

  .relationTarget {
    color: var(--slate-100);
  }

  .relationTargetLink {
    color: var(--slate-100);
  }

  .relationTargetLink:hover {
    color: var(--coral-300);
  }
}

@media (max-width: 900px) {
  .editorGrid {
    grid-template-columns: 1fr;
  }

  .aiDiffPair {
    grid-template-columns: 1fr;
  }

  .fixedMetaTopRow {
    grid-template-columns: minmax(0, 1fr) minmax(160px, 220px);
  }

  .customFieldList {
    flex-direction: column;
  }
}

@media (max-width: 760px) {
  .fixedMetaTopRow {
    grid-template-columns: 1fr;
  }

  .customFieldList {
    flex-direction: column;
  }
}

@media (prefers-reduced-motion: reduce) {
  .cardSwitching {
    animation: none;
  }
}
